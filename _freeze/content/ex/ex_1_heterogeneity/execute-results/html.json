{
  "hash": "f0e34b5eaae05c4551e636d6736618b9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Exercise - Simulating treatment effect heterogeneity\"\nsubtitle: \"The impact of extra lessons on students' grades, a statistical power analysis.\"\npublished-title: \"Date\"\ndate: \"2024-10-02\"\nself-contained: true\nengine: knitr\nhtml-math-method: mathml\n---\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-important title=\"Instructions\"}\nBefore class next week (October 2nd), please send me via email a `.html` document (not a `.qmd` document), generated with Quarto, implementing the analysis required and answering the questions listed in the present document.\n\n\nPlease implement the whole simulation from scratch. You can copy/paste what we have done before and use this as a starting point.\n\nMake sure to include the following lines as an option to your document (at the very top of your .qmd document, between the two series of `---`. Don't forget to remove the pre-existing `format: html` line, if there is one). It will produce [a self-contained html](https://quarto.org/docs/output-formats/html-basics.html#self-contained), *ie*, a nicely rendered html that stands alone:\n\n```\nformat:\n  html:\n    embed-resources: true\n```\n:::\n\nSo far, the power analysis we implemented for our economics of education experiment assumed that we accurately represented the true DGP. However, it is very likely that the actual DGP would be different from the one we modeled. For instance, effects are probably heterogenous across individuals. \n\n::: {.callout-note}\nWe are often interested in estimating a version of an ATE (Average Treatment Effect). The wording itself (\"average\") implies that we indeed expect effects to be heterogenous across individuals.\n:::\n\nIn this exercise, you will implement the same power analysis as the one we implemented before but with some sort of heterogeneity in treatment effects.\n\n::: {.callout-caution icon=false title=\"Question 1\"}\nWhat other reasons than heterogeneity in treatment effect could cause the DGP to be different from the one we simulated so far?\n:::\n\nAlthough there are other reasons for the DGP to be different, we will focus on heterogeneity here. To add heterogeneity to the analysis, we need to modify <input class='webex-solveme nospaces' size='13' data-answer='[\"generate_data\"]'/>. \n\nThere are of course many ways to model heterogeneity in treatment effect. Pick one, modify what is needed and display your code below.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Copy/paste and modify the code we wrote together\n# (only the necessary bits)\n```\n:::\n\n\n::: {.callout-caution icon=false title=\"Question 2\"}\nJustify your choices in maximum 5 lines (there is no correct answer, you just need to justify your choice a bit).\n:::\n\nAs discussed in class, the true effect size matters a lot for the resulting statistical power. Quickly explore the economics of education literature (for instance [Kraft (2020)](https://journals-sagepub-com.ezproxy.cul.columbia.edu/share/5HPDBICWIJATV22ZARSJ?target=10.3102/0013189X20912798)) to get a sense of the typical magnitude of treatment effects in this literature.\n\n::: {.callout-caution icon=false title=\"Question 3\"}\nWhat value would you choose for the true effect? Very briefly explain your choice.\n:::\n\nRun the power simulation, varying the sample size.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Copy/paste the rest of the code necessary to run the simulation\n```\n:::\n\n\n::: {.callout-caution icon=false title=\"Question 4\"}\nWhich sample size would you choose? Explain and return one graph (explaining why you chose this type of graph).\n:::\n\nWhich condition is necessary for your answer to hold?\n\n\n<div class='webex-solution'><button>Answer</button>\n\nThe true DGP needs to be similar to what you simulated.\n\n</div>\n\n\nNow imagine you would like to modify the DGP again. Modifying the code and running the analysis again would prevent you from keeping track of the previous analysis and would not be very reproducible. Copying and pasting the code before modifying it would not be reproducible either. \n\n::: {.callout-caution icon=false title=\"Bonus Question\"}\nHow would you proceed so that you would keep track of your previous analyses, with a different DGP? Answer in just a couple of lines.\n:::\n\n\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}